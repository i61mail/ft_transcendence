{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ayyassif/hh/frontend/lib/pong/interfaces.ts"],"sourcesContent":["interface settingsInterface {\n    // canvas\n    canvasColor: string;\n    canvasWidth: number;\n    canvasHeight: number;\n    // court\n    wallColor: string;\n\twallSize: number;\n\tcourtMarginX: number;\n\tcourtMarginY: number;\n    // logic\n    getIntervalLength: () => number;\n    targetFps: number;\n    // paddle\n    paddleSpeed: number;\n    playerOneColor: string;\n    playerTwoColor: string;\n    paddleWidth: number;\n    paddleHeight: number;\n    // scoreboard\n    winningScore: number;\n    smallFont: string;\n    largeFont: string;\n    scoreTextColor: string;\n    // ball\n    ballMinSpeed: number;\n    ballMaxSpeed: number;\n    ballColor: string;\n    ballAcceleration: number;\n    ballRadius: number;\n}\n\nexport const SETTINGS: settingsInterface =\n{\n    // canvas\n    canvasColor: \"#004c00ff\",\n    canvasWidth: 800,\n    canvasHeight: 600,\n\t// court\n    wallColor: \"#b8b8b8ff\",\n    wallSize: 30,\n    courtMarginX: 12, // might remove later if not used\n    courtMarginY: 10,\n    // logic\n    getIntervalLength: function() { return (1000 / this.targetFps); }, // milliseconds\n    targetFps: 60,\n    // paddle\n    paddleSpeed: 200, // pixels per second\n    playerOneColor: \"#0000FF\",\n    playerTwoColor: \"#FF0000\",\n    paddleWidth: 12,\n    paddleHeight: 80,\n    // scoreboard\n    winningScore: 7,\n    smallFont: \"20px Arial\",\n    largeFont: \"30px Arial\",\n    scoreTextColor: \"#F0EAD6\", // eggshell white\n    // ball\n    ballMinSpeed: 200,\n    ballMaxSpeed: 300,\n    ballColor: \"#F0EAD6\", // eggshell white\n    ballAcceleration: 10,\n    ballRadius: 8\n};\n\nexport enum GameMode {\n    online,\n    local,\n    AI\n}\n\nexport enum PlayerIndex {\n    leftPlayer = 1,\n    rightPlayer = 2\n};\n\nexport interface messageInterface\n{\n    leftPlayerPosY: number;\n    rightPlayerPosY: number;\n    \n    leftPlayerScore: number;\n    rightPlayerScore: number;\n\n    ballPosX: number;\n    ballPosY: number;\n}\n\nexport enum keyStat\n{\n    down,\n    up,\n    none\n}\n"],"names":[],"mappings":";;;;;;;;;;AAgCO,MAAM,WACb;IACI,SAAS;IACT,aAAa;IACb,aAAa;IACb,cAAc;IACjB,QAAQ;IACL,WAAW;IACX,UAAU;IACV,cAAc;IACd,cAAc;IACd,QAAQ;IACR,mBAAmB;QAAa,OAAQ,OAAO,IAAI,CAAC,SAAS;IAAG;IAChE,WAAW;IACX,SAAS;IACT,aAAa;IACb,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,cAAc;IACd,aAAa;IACb,cAAc;IACd,WAAW;IACX,WAAW;IACX,gBAAgB;IAChB,OAAO;IACP,cAAc;IACd,cAAc;IACd,WAAW;IACX,kBAAkB;IAClB,YAAY;AAChB;AAEO,IAAA,AAAK,kCAAA;;;;WAAA;;AAML,IAAA,AAAK,qCAAA;;;WAAA;;AAiBL,IAAA,AAAK,iCAAA;;;;WAAA","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/ayyassif/hh/frontend/lib/pong/game.ts"],"sourcesContent":["import * as intf from \"./interfaces\";\n\nclass ScoreBoard\n{\n    leftPlayerScore: number = 0;\n    rightPlayerScore: number = 0;\n    round: number = 0;\n\n    get winner() : number\n    {\n        if (this.leftPlayerScore >= intf.SETTINGS.winningScore)\n            return intf.PlayerIndex.leftPlayer;\n        if (this.rightPlayerScore >= intf.SETTINGS.winningScore)\n            return intf.PlayerIndex.rightPlayer;\n        return 0;\n    }\n\n    draw (canvas: HTMLCanvasElement)\n    {\n        let context = canvas.getContext('2d');\n        if (!context)\n            return;\n\n        context.font = intf.SETTINGS.smallFont;\n        context.fillStyle = intf.SETTINGS.scoreTextColor;\n        context.fillText(\"Player 1: \" + this.leftPlayerScore, 20, 30); // it's hard coded so change this later\n        context.fillText(\"Player 2: \" + this.rightPlayerScore, canvas.width - 120, 30); // it's hard coded so change this later\n        context.fillText(\"Round: \" + this.round, canvas.width / 2 - 30, 30); // it's hard coded so change this later\n        if (this.winner)\n        {\n            let winnerText = this.winner == (intf.PlayerIndex.leftPlayer) ? \"Player 1 Wins!\" : \"Player 2 Wins!\";\n            context.font = intf.SETTINGS.largeFont;\n            context.fillText(winnerText, canvas.width / 2 - 80, canvas.height / 2); // it's hard coded so change this later\n        }\n    }\n\n    update(leftPS: number, rightPS:number)\n    {\n        this.leftPlayerScore = leftPS;\n        this.rightPlayerScore = rightPS;\n        this.round = leftPS + rightPS + 1;\n    }\n}\n\nclass Ball\n{\n    posX: number;\n    posY: number;\n\n    constructor()\n    {\n        this.posX = intf.SETTINGS.canvasWidth / 2;\n        this.posY = intf.SETTINGS.canvasHeight / 2;\n    }\n\n    draw(canvas: HTMLCanvasElement)\n    {\n        let context = canvas.getContext('2d');\n        if (!context)\n            return;\n        context.fillStyle = intf.SETTINGS.ballColor;\n        context.beginPath();\n        context.arc(this.posX, this.posY, intf.SETTINGS.ballRadius, 0, Math.PI * 2, false);\n        context.fill();\n    }\n    \n    update(nextPosX: number, nextPosY: number)\n    {\n        this.posX = nextPosX;\n        this.posY = nextPosY;\n    }\n}\n\n\nclass Padle\n{\n    public  posX: number;\n    public  posY: number;\n    public  playerIndex: intf.PlayerIndex;\n    private _status: intf.keyStat;\n    private _gameMode:intf.GameMode;\n\n    constructor(playerIndex: intf.PlayerIndex, court: Court, isPlayable: boolean, gameMode: intf.GameMode)\n    {\n       if (playerIndex == intf.PlayerIndex.leftPlayer)\n            this.posX = intf.SETTINGS.paddleWidth;\n        else\n            this.posX = intf.SETTINGS.canvasWidth - 2 * intf.SETTINGS.paddleWidth;\n        this.posY =  intf.SETTINGS.canvasHeight / 2 - intf.SETTINGS.paddleHeight / 2;\n        this.playerIndex  = playerIndex;\n        this._status = intf.keyStat.none;\n        this._gameMode = gameMode;\n\n        let that: Padle = this;\n        if (this._gameMode == intf.GameMode.online && !isPlayable)\n            return ;\n        document.addEventListener(\"keydown\", function(e) {\n            \n            if (e.key == that.upKey && that._status != intf.keyStat.up)\n            {\n                that._status = intf.keyStat.up;\n                if (court.socket.readyState === WebSocket.OPEN)\n                    court.socket.send(that.status);\n            }\n            else if (e.key == that.downKey && that._status != intf.keyStat.down)\n            {\n                that._status = intf.keyStat.down;\n                if (court.socket.readyState === WebSocket.OPEN)\n                    court.socket.send(that.status);\n            }\n        });\n        \n        document.addEventListener(\"keyup\", function(e) {\n            if (court.socket.readyState != WebSocket.OPEN)\n                return ;\n            if ((e.key == that.upKey && that._status == intf.keyStat.up)\n                || (e.key == that.downKey && that._status == intf.keyStat.down))\n            {\n                that._status = intf.keyStat.none;\n                if (court.socket.readyState === WebSocket.OPEN)\n                    court.socket.send(that.status);\n            }\n        });\n    }\n\n    static get speed() { return intf.SETTINGS.paddleSpeed; } // pixels per second // maybe useless remove later\n\n    get upKey(): string\n    {\n        return this._gameMode == intf.GameMode.local && this.playerIndex == intf.PlayerIndex.rightPlayer\n                ? \"ArrowUp\" : \"w\";\n    }\n    get downKey(): string\n    {\n        return this._gameMode == intf.GameMode.local && this.playerIndex == intf.PlayerIndex.rightPlayer\n                ? \"ArrowDown\" : \"s\";\n    }\n\n    get status() : string\n    {\n        if (this._gameMode == intf.GameMode.local)\n        {\n            return this.playerIndex.toString() + this._status.toString();\n        }\n        return this._status.toString();\n    }\n\n    get renderColor()\n    {\n        return this.playerIndex  == intf.PlayerIndex.leftPlayer ? intf.SETTINGS.playerOneColor : intf.SETTINGS.playerTwoColor;\n    }\n\n    draw(canvas: HTMLCanvasElement)\n    {\n        let context = canvas.getContext('2d');\n        if (!context)\n            return;\n\n        context.fillStyle = this.renderColor;\n        context.fillRect(this.posX, this.posY, intf.SETTINGS.paddleWidth, intf.SETTINGS.paddleHeight);\n    }\n}\n\nclass Court\n{\n    leftPadle!: Padle;\n    rightPadle!: Padle;\n    gameMode: intf.GameMode;\n    socket: WebSocket;\n    _scoreBoard: ScoreBoard;\n    _ball: Ball;\n\n    constructor(canvas: HTMLCanvasElement, socket: WebSocket, info: string)\n    {\n        const { gm, playerIndex } = JSON.parse(info);\n\n        this.socket = socket;\n        this.gameMode = gm;\n\n        this.leftPadle = new Padle(intf.PlayerIndex.leftPlayer, this,\n            (playerIndex == 0) ? true : false, this.gameMode);\n        this.rightPadle = new Padle(intf.PlayerIndex.rightPlayer, this,\n            (playerIndex == 1) ? true : false, this.gameMode);\n\n        this._scoreBoard = new ScoreBoard();\n        this._ball = new Ball();\n\n    }\n\n    get bounds()\n    {\n        return {\n            upper: intf.SETTINGS.courtMarginY + intf.SETTINGS.wallSize,\n            lower: intf.SETTINGS.canvasHeight - intf.SETTINGS.courtMarginY - intf.SETTINGS.wallSize,\n            left: 0,\n            right: intf.SETTINGS.canvasWidth\n        }\n    }\n\n    public listen(message: intf.messageInterface)\n    {\n        this.leftPadle.posY = message.leftPlayerPosY;\n        this.rightPadle.posY = message.rightPlayerPosY;\n        this._ball.update(message.ballPosX, message.ballPosY);\n        this._scoreBoard.update(message.leftPlayerScore, message.rightPlayerScore);\n    }\n\n    draw(canvas: HTMLCanvasElement)\n    {\n        let context = canvas.getContext('2d');\n        if (!context)\n            return;\n\n        context.fillStyle = intf.SETTINGS.wallColor;\n        context.fillRect(0, intf.SETTINGS.courtMarginY, intf.SETTINGS.canvasWidth, intf.SETTINGS.wallSize);\n        context.fillRect(0, intf.SETTINGS.canvasHeight - intf.SETTINGS.wallSize - intf.SETTINGS.courtMarginY, intf.SETTINGS.canvasWidth, intf.SETTINGS.wallSize);\n        this.leftPadle.draw(canvas);\n        this.rightPadle.draw(canvas);\n        this._ball.draw(canvas);\n        this._scoreBoard.draw(canvas);\n    }\n}\n\nclass PongGame\n{\n\tprivate _canvas: HTMLCanvasElement;\n\tprivate _court: Court;\n\n    constructor(canvas: HTMLCanvasElement, info: string, socket: WebSocket)\n    {\n        this._canvas = canvas;\n        this._court = new Court(canvas, socket, info);\n    }\n\n    public listen(message: intf.messageInterface)\n    {\n        this._court.listen(message);\n        this._draw();\n    } \n\n    private _draw()\n    {\n        let context = this._canvas.getContext('2d');\n        if (context) {\n            context.clearRect(0, 0, this._canvas.width, this._canvas.height);\n            this._court.draw(this._canvas);\n        }\n    }\n\n}\n\nexport function startGame(canvas: HTMLCanvasElement, socket: WebSocket, data: string)\n{\n    let pong: PongGame;\n\n    canvas.width = intf.SETTINGS.canvasWidth;\n    canvas.height = intf.SETTINGS.canvasHeight;\n    canvas.style.backgroundColor = intf.SETTINGS.canvasColor;\n    pong = new PongGame(canvas, data, socket);\n\n    socket.onmessage = (msg) =>\n    {\n        console.log(\"on message working!\")\n        pong.listen(JSON.parse(msg.data));\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///home/ayyassif/hh/frontend/app/games/online/page.tsx"],"sourcesContent":["\"use client\"\n\nimport useglobalStore from \"@/context/GlobalStore\"\nimport { startGame } from \"@/lib/pong/game\";\nimport { useEffect, useRef, useState } from \"react\";\n\nconst OnlineGame = () =>\n{\n    const manager = useglobalStore();\n    const [start, setStart] = useState(false);\n    const sentRef = useRef<boolean>(false);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() =>\n    {\n        if (manager.gameSocket && !sentRef.current)\n        {\n            console.log(\"starting online game...\");\n            const data = {gameType: \"online\", data: {player: {id: manager.user?.id}}};\n            manager.gameSocket.send(JSON.stringify(data));\n            sentRef.current = true;\n            manager.gameSocket.onmessage = (msg) => \n            {\n                console.log(msg.data);\n                setStart(true);\n                if (canvasRef.current && manager.gameSocket)\n                {\n                    console.log(\"start\")\n                    startGame(canvasRef.current, manager.gameSocket, msg.data);\n                }\n            }\n        }\n    }, [manager.gameSocket])\n\n    return (\n        <>\n            {/* {!start && <div>Loading...</div>} */}\n            {<canvas ref={canvasRef} width={800} height={600}>\n            if you see this message, than the canvas did not load propraly\n        </canvas>}\n        </>\n    )\n}\n\nexport default OnlineGame;"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,aAAa;IAEf,MAAM,UAAU,IAAA,6IAAc;IAC9B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,UAAU,IAAA,2NAAM,EAAU;IAChC,MAAM,YAAY,IAAA,2NAAM,EAAoB;IAE5C,IAAA,8NAAS,EAAC;QAEN,IAAI,QAAQ,UAAU,IAAI,CAAC,QAAQ,OAAO,EAC1C;YACI,QAAQ,GAAG,CAAC;YACZ,MAAM,OAAO;gBAAC,UAAU;gBAAU,MAAM;oBAAC,QAAQ;wBAAC,IAAI,QAAQ,IAAI,EAAE;oBAAE;gBAAC;YAAC;YACxE,QAAQ,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;YACvC,QAAQ,OAAO,GAAG;YAClB,QAAQ,UAAU,CAAC,SAAS,GAAG,CAAC;gBAE5B,QAAQ,GAAG,CAAC,IAAI,IAAI;gBACpB,SAAS;gBACT,IAAI,UAAU,OAAO,IAAI,QAAQ,UAAU,EAC3C;oBACI,QAAQ,GAAG,CAAC;oBACZ,IAAA,4IAAS,EAAC,UAAU,OAAO,EAAE,QAAQ,UAAU,EAAE,IAAI,IAAI;gBAC7D;YACJ;QACJ;IACJ,GAAG;QAAC,QAAQ,UAAU;KAAC;IAEvB,qBACI;kBAEK,cAAA,0PAAC;YAAO,KAAK;YAAW,OAAO;YAAK,QAAQ;sBAAK;;;;;;;AAK9D;uCAEe","debugId":null}}]
}