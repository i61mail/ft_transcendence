{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/ChatsWrapper.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/ft_transcendence/frontend/components/features/chat/ChatsWrapper.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/ft_transcendence/frontend/components/features/chat/ChatsWrapper.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,mTAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+U,GAC5W,6GACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/ChatsWrapper.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/ft_transcendence/frontend/components/features/chat/ChatsWrapper.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/ft_transcendence/frontend/components/features/chat/ChatsWrapper.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,mTAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2T,GACxV,yFACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,mTAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2U,GACxW,yGACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,mTAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuT,GACpV,qFACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/context/GlobalStore.ts"],"sourcesContent":["import { FriendshipProps, UserProps, MessageProps } from \"@/types/common.types\";\nimport { create } from \"zustand\";\n\n\ninterface GLobalState {\n    socket: WebSocket | null,\n    gameSocket: WebSocket | null,\n    isLogged: boolean,\n    user: UserProps | null,\n    friends: FriendshipProps[],\n    searchFilter: string,\n    pointedUser: FriendshipProps | null,\n    currentChat: number,\n    messages: MessageProps[],\n    updateGameSocket: (s: WebSocket | null) => void,\n    changePointedUser: (newPointedUser: FriendshipProps) => void,\n    login: (user: UserProps) => void,\n    logout: () => void,\n    createSocket: () => void,\n    changeFilter: (filter: string) => void,\n    updateFriendList: (friends: FriendshipProps[]) => void,\n    updateCurrentChat: (id: number) => void,\n    loadMessage: (messages: MessageProps[]) => void,\n    addMessage: (message: MessageProps) => void\n}\n\n\nconst useglobalStore = create<GLobalState>((set,get) => (\n{\n    socket: null,\n    gameSocket: null,\n    user: null,\n    isLogged: false,\n    friends: [],\n    searchFilter: '',\n    currentChat: 0,\n    pointedUser: null,\n    messages: [],\n    login: (user) => set(() => ({\n        isLogged: true,\n        user: user\n    })),\n    logout: () => set(() => ({\n        isLogged: false,\n        user: null\n    })),\n    createSocket: () => {\n        const current = get().socket;\n        if (!current)\n        {\n            console.log(\"INIT...\")\n            const newSocket = new WebSocket(\"ws://localhost:4000/sockets\");\n            newSocket.onopen = () =>\n            {\n                console.log(\"connecting to backend...\");\n                set(() => ({socket: newSocket}));\n                const handshake = {type: \"handshake\", content: get().user?.id};\n                if (newSocket.readyState === WebSocket.OPEN)\n                    newSocket.send(JSON.stringify(handshake));\n            }\n            // newSocket.onmessage = (msg) =>\n            // {\n            //     console.log(\"received message on\", get().currentChat, newSocket.url);\n            //     const {receiver, sender, content, id, friendship_id} = JSON.parse(msg.data);\n            //     console.log(typeof(get().currentChat));\n            //     if (get().currentChat === friendship_id)\n            //     {\n            //         const newMessage: MessageProps = {sender: sender, receiver: receiver, content: content, id: id};\n            //         console.log(\"adding message to chat\", get().currentChat);\n            //         get().addMessage(newMessage);\n            //     }\n            //     else\n            //         console.log(\"wrong place\", get().currentChat, friendship_id);\n            // }\n            newSocket.onclose = () =>\n            {\n                console.log(\"closing socket...\");\n                newSocket.close();\n                set(() => ({socket: null}));\n            }\n            newSocket.onerror = (event) =>\n            {\n                console.log(\"error: \", event.target);\n            }\n        }\n    },\n    updateFriendList: (friends: FriendshipProps[]) =>\n    {\n        set({friends: friends});\n        console.log(get().friends);\n    },\n    changeFilter: (filter: string) =>\n    {\n        set({searchFilter: filter});\n    },\n    changePointedUser: (newPointedUser: FriendshipProps) =>\n    {\n        if (newPointedUser !== get().pointedUser)\n            set({messages: []});\n        set({pointedUser: newPointedUser});\n    },\n    updateCurrentChat: (id: number) => {\n        console.log(\"new chat page\", id);\n        set({currentChat: (Number(id))});\n    },\n    loadMessage: (messages: MessageProps[]) => \n    {\n        console.log(\"size before loading\", get().messages.length);\n        set({messages: messages});\n    },\n    addMessage: (message: MessageProps) =>\n    {\n        console.log(\"size before adding message\", get().messages.length);\n        set((state) => ({messages: [message, ...state.messages]}))\n    },\n    updateGameSocket: (s: WebSocket | null) =>\n    {\n        set(()=>({gameSocket: s}));\n    }\n}))\n\n\nexport default useglobalStore;\n"],"names":[],"mappings":";;;;AACA;;AA0BA,MAAM,iBAAiB,IAAA,6LAAM,EAAc,CAAC,KAAI,MAAQ,CACxD;QACI,QAAQ;QACR,YAAY;QACZ,MAAM;QACN,UAAU;QACV,SAAS,EAAE;QACX,cAAc;QACd,aAAa;QACb,aAAa;QACb,UAAU,EAAE;QACZ,OAAO,CAAC,OAAS,IAAI,IAAM,CAAC;oBACxB,UAAU;oBACV,MAAM;gBACV,CAAC;QACD,QAAQ,IAAM,IAAI,IAAM,CAAC;oBACrB,UAAU;oBACV,MAAM;gBACV,CAAC;QACD,cAAc;YACV,MAAM,UAAU,MAAM,MAAM;YAC5B,IAAI,CAAC,SACL;gBACI,QAAQ,GAAG,CAAC;gBACZ,MAAM,YAAY,IAAI,UAAU;gBAChC,UAAU,MAAM,GAAG;oBAEf,QAAQ,GAAG,CAAC;oBACZ,IAAI,IAAM,CAAC;4BAAC,QAAQ;wBAAS,CAAC;oBAC9B,MAAM,YAAY;wBAAC,MAAM;wBAAa,SAAS,MAAM,IAAI,EAAE;oBAAE;oBAC7D,IAAI,UAAU,UAAU,KAAK,UAAU,IAAI,EACvC,UAAU,IAAI,CAAC,KAAK,SAAS,CAAC;gBACtC;gBACA,iCAAiC;gBACjC,IAAI;gBACJ,4EAA4E;gBAC5E,mFAAmF;gBACnF,8CAA8C;gBAC9C,+CAA+C;gBAC/C,QAAQ;gBACR,2GAA2G;gBAC3G,oEAAoE;gBACpE,wCAAwC;gBACxC,QAAQ;gBACR,WAAW;gBACX,wEAAwE;gBACxE,IAAI;gBACJ,UAAU,OAAO,GAAG;oBAEhB,QAAQ,GAAG,CAAC;oBACZ,UAAU,KAAK;oBACf,IAAI,IAAM,CAAC;4BAAC,QAAQ;wBAAI,CAAC;gBAC7B;gBACA,UAAU,OAAO,GAAG,CAAC;oBAEjB,QAAQ,GAAG,CAAC,WAAW,MAAM,MAAM;gBACvC;YACJ;QACJ;QACA,kBAAkB,CAAC;YAEf,IAAI;gBAAC,SAAS;YAAO;YACrB,QAAQ,GAAG,CAAC,MAAM,OAAO;QAC7B;QACA,cAAc,CAAC;YAEX,IAAI;gBAAC,cAAc;YAAM;QAC7B;QACA,mBAAmB,CAAC;YAEhB,IAAI,mBAAmB,MAAM,WAAW,EACpC,IAAI;gBAAC,UAAU,EAAE;YAAA;YACrB,IAAI;gBAAC,aAAa;YAAc;QACpC;QACA,mBAAmB,CAAC;YAChB,QAAQ,GAAG,CAAC,iBAAiB;YAC7B,IAAI;gBAAC,aAAc,OAAO;YAAI;QAClC;QACA,aAAa,CAAC;YAEV,QAAQ,GAAG,CAAC,uBAAuB,MAAM,QAAQ,CAAC,MAAM;YACxD,IAAI;gBAAC,UAAU;YAAQ;QAC3B;QACA,YAAY,CAAC;YAET,QAAQ,GAAG,CAAC,8BAA8B,MAAM,QAAQ,CAAC,MAAM;YAC/D,IAAI,CAAC,QAAU,CAAC;oBAAC,UAAU;wBAAC;2BAAY,MAAM,QAAQ;qBAAC;gBAAA,CAAC;QAC5D;QACA,kBAAkB,CAAC;YAEf,IAAI,IAAI,CAAC;oBAAC,YAAY;gBAAC,CAAC;QAC5B;IACJ,CAAC;uCAGc","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/app/chats/%5Bid%5D/page.tsx"],"sourcesContent":["import ChatsWrapper from \"@/components/features/chat/ChatsWrapper\";\nimport AllChats from \"@/components/features/chat/AllChats\"\nimport useglobalStore from \"@/context/GlobalStore\";\n\nconst chat = async ({params}: {params: Promise<{id: number}>}) =>\n{\n    const manager = useglobalStore();\n    const {id} = await params;\n    return (\n    <>\n        <AllChats />\n        <ChatsWrapper chat_id={id}/>\n    </>\n)\n};\n\nexport default chat;"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,MAAM,OAAO,OAAO,EAAC,MAAM,EAAkC;IAEzD,MAAM,UAAU,IAAA,4KAAc;IAC9B,MAAM,EAAC,EAAE,EAAC,GAAG,MAAM;IACnB,qBACA;;0BACI,yRAAC,iMAAQ;;;;;0BACT,yRAAC,qMAAY;gBAAC,SAAS;;;;;;;;AAG/B;uCAEe","debugId":null}}]
}