{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/ChatPreview.tsx"],"sourcesContent":["'use client'\nimport React, { useEffect, useRef, useState } from 'react'\nimport Image from 'next/image'\nimport defaultUser from \"../../../public/defaultUser.svg\"\nimport { useChatContext } from '@/context/ChatContextProvider';\nimport { useAuth } from '@/context/AuthProvider';\nimport { FriendshipProps } from '@/types/common.types';\nimport { useRouter } from 'next/navigation';\nimport useglobalStore from '@/context/GlobalStore';\n\ninterface Props\n{\n    friend: FriendshipProps\n}\n\n\nconst ChatPreview = (data: Props) => {\n    const   manager = useglobalStore();\n    const   router = useRouter();\n    const   [latestMessage, setLatestMessage] = useState(\"\");\n    const   [notification, setNotification] = useState(false);\n\n\n\n    useEffect(() => \n    {\n        if (manager.latestMessage && manager.latestMessage.friendship_id === data.friend.id)\n            setNotification(true);\n            manager.updateLatestMessage(null);\n        }, [manager.latestMessage])\n    // const   currentPointed = useRef<FriendshipProps>(chatContext.pointedUser);\n    \n    // const getCondition = () => data.friend.id === currentPointed.current?.username;\n\n\n\n    // useEffect(() =>\n    // {\n    //     currentPointed.current = chatContext.pointedUser;\n    // }, [chatContext.pointedUser])\n\n\n    // useEffect(() =>\n    // {\n    //     if (!messageNotification.current)\n    //     {\n    //         messageNotification.current = new WebSocket(\"ws://localhost:4000/sockets/notifications/chatPreview\");\n    //         messageNotification.current.onopen = () =>\n    //         {\n    //             let value =  {\n    //                 type: \"registration\",\n    //                 sender: data.friend.username,\n    //                 receiver: auth.user?.username\n    //             }\n    //             if (messageNotification.current?.readyState === WebSocket.OPEN)\n    //                 messageNotification.current.send(JSON.stringify(value));\n    //         }\n    //         messageNotification.current.onmessage = (msg) =>\n    //         {\n    //             const {type, message} = JSON.parse(msg.data.toString());\n    //             console.log(\"receiving noti\", message);\n    //             setLatestMessage(message);\n    //             if (getCondition() === false)\n    //                 setNotification(true);\n    //         }\n    //         messageNotification.current.onerror = (error) => {\n    //             console.error('WebSocket error:', error);\n    //         };\n    //     }\n    // },[])\n\n   return (\n    <div onClick={() => {\n        setNotification(false);\n        router.push(`/chats/${data.friend.id}`)\n    }} className={`h-20 w-full rounded-xl flex px-3 gap-x-5 items-center ${manager.pointedUser?.username === data.friend.username && \"bg-[#B0BBCF]\"} ${notification && \"border-2 bg-blue-100 border-white\"}`}>\n        <div className='size-[60] rounded-full bg-gray-200'>\n            <Image className=\"size-fit\" src={defaultUser} alt='search icon'/>\n        </div>\n        <div className='flex flex-col gap-y-0.5'>\n            <h1 className='text-[24px]'>{data.friend.username}</h1>\n            <p className='px-3'>{latestMessage}</p>\n        </div>\n    </div>\n)\n}\n\nexport default ChatPreview\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAIA;AACA;;;AARA;;;;;;AAgBA,MAAM,cAAc,CAAC;QA2DsD;;IA1DvE,MAAQ,UAAU,IAAA,+KAAc;IAChC,MAAQ,SAAS,IAAA,6LAAS;IAC1B,MAAQ,CAAC,eAAe,iBAAiB,GAAG,IAAA,oNAAQ,EAAC;IACrD,MAAQ,CAAC,cAAc,gBAAgB,GAAG,IAAA,oNAAQ,EAAC;IAInD,IAAA,qNAAS;iCAAC;YAEN,IAAI,QAAQ,aAAa,IAAI,QAAQ,aAAa,CAAC,aAAa,KAAK,KAAK,MAAM,CAAC,EAAE,EAC/E,gBAAgB;YAChB,QAAQ,mBAAmB,CAAC;QAChC;gCAAG;QAAC,QAAQ,aAAa;KAAC;IAC9B,6EAA6E;IAE7E,kFAAkF;IAIlF,kBAAkB;IAClB,IAAI;IACJ,wDAAwD;IACxD,gCAAgC;IAGhC,kBAAkB;IAClB,IAAI;IACJ,wCAAwC;IACxC,QAAQ;IACR,gHAAgH;IAChH,qDAAqD;IACrD,YAAY;IACZ,6BAA6B;IAC7B,wCAAwC;IACxC,gDAAgD;IAChD,gDAAgD;IAChD,gBAAgB;IAChB,8EAA8E;IAC9E,2EAA2E;IAC3E,YAAY;IACZ,2DAA2D;IAC3D,YAAY;IACZ,uEAAuE;IACvE,sDAAsD;IACtD,yCAAyC;IACzC,4CAA4C;IAC5C,yCAAyC;IACzC,YAAY;IACZ,6DAA6D;IAC7D,wDAAwD;IACxD,aAAa;IACb,QAAQ;IACR,QAAQ;IAET,qBACC,wOAAC;QAAI,SAAS;YACV,gBAAgB;YAChB,OAAO,IAAI,CAAC,AAAC,UAAwB,OAAf,KAAK,MAAM,CAAC,EAAE;QACxC;QAAG,WAAW,AAAC,yDAAoI,OAA5E,EAAA,uBAAA,QAAQ,WAAW,cAAnB,2CAAA,qBAAqB,QAAQ,MAAK,KAAK,MAAM,CAAC,QAAQ,IAAI,gBAAe,KAAuD,OAApD,gBAAgB;;0BAC/J,wOAAC;gBAAI,WAAU;0BACX,cAAA,wOAAC,sLAAK;oBAAC,WAAU;oBAAW,KAAK,+XAAW;oBAAE,KAAI;;;;;;;;;;;0BAEtD,wOAAC;gBAAI,WAAU;;kCACX,wOAAC;wBAAG,WAAU;kCAAe,KAAK,MAAM,CAAC,QAAQ;;;;;;kCACjD,wOAAC;wBAAE,WAAU;kCAAQ;;;;;;;;;;;;;;;;;;AAIjC;GArEM;;QAEe,6LAAS;;;KAFxB;uCAuES","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/public/search.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 24, height: 24, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,+JAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/SearchBar.tsx"],"sourcesContent":["import React from 'react'\nimport Image from 'next/image'\nimport search from \"../../../public/search.svg\"\nimport useglobalStore from '@/context/GlobalStore';\n\nconst SearchBar = () => {\n  const {changeFilter} = useglobalStore();\n  return (\n    <div className='h-10 w-full px-4 bg-[#BEC7DA] rounded-full flex gap-2'>\n    <Image src={search} alt='search icon'/>\n    <input onChange={(event)=>changeFilter(event.target.value)} className='outline-none w-full text-[20px]' type='text' placeholder=\"Search\"/>\n</div>\n)\n}\n\nexport default SearchBar\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAEA,MAAM,YAAY;IAChB,MAAM,EAAC,YAAY,EAAC,GAAG,IAAA,+KAAc;IACrC,qBACE,wOAAC;QAAI,WAAU;;0BACf,wOAAC,sLAAK;gBAAC,KAAK,qXAAM;gBAAE,KAAI;;;;;;0BACxB,wOAAC;gBAAM,UAAU,CAAC,QAAQ,aAAa,MAAM,MAAM,CAAC,KAAK;gBAAG,WAAU;gBAAkC,MAAK;gBAAO,aAAY;;;;;;;;;;;;AAGpI;KARM;uCAUS","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///home/shamdoun/Desktop/ft_transcendence/frontend/components/features/chat/AllChats.tsx"],"sourcesContent":["'use client'\nimport React from 'react'\nimport ChatPreview from './ChatPreview'\nimport SearchBar from './SearchBar';\nimport { useChatContext } from '@/context/ChatContextProvider';\nimport { useAuth } from '@/context/AuthProvider';\nimport { FriendshipProps } from '@/types/common.types';\nimport { useGlobalContext } from '@/context/GLobalContextProvider';\nimport useglobalStore from '@/context/GlobalStore';\n\nconst AllChats = () => \n{\n    const {friends, searchFilter} = useglobalStore();\n\n    const filteredData:FriendshipProps[] = searchFilter.length > 0 ? friends.filter((data) => data.username.toLocaleLowerCase().includes(searchFilter.toLocaleLowerCase())) : friends;\n    \n    return (\n        <div className='flex-1 h-full rounded-t-[30] bg-linear-to-t to-[#93A1BF] from-[#4D658100] padding px-6 py-8 flex flex-col gap-y-5'>\n            <h1 className='text-[24px]'>ALL CHATS FOR</h1>\n            <SearchBar />\n            <div className='flex flex-col gap-y-5 h-full overflow-y-scroll'>\n                {\n                    filteredData.map((v:FriendshipProps) =>\n                        {\n                            return (<ChatPreview key={v.id} friend={v}/>)\n                        }\n                    )\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default AllChats\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAKA;AARA;;;;;AAUA,MAAM,WAAW;IAEb,MAAM,EAAC,OAAO,EAAE,YAAY,EAAC,GAAG,IAAA,+KAAc;IAE9C,MAAM,eAAiC,aAAa,MAAM,GAAG,IAAI,QAAQ,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,CAAC,iBAAiB,GAAG,QAAQ,CAAC,aAAa,iBAAiB,OAAO;IAE1K,qBACI,wOAAC;QAAI,WAAU;;0BACX,wOAAC;gBAAG,WAAU;0BAAc;;;;;;0BAC5B,wOAAC,qMAAS;;;;;0BACV,wOAAC;gBAAI,WAAU;0BAEP,aAAa,GAAG,CAAC,CAAC;oBAEV,qBAAQ,wOAAC,uMAAW;wBAAY,QAAQ;uBAAd,EAAE,EAAE;;;;;gBAClC;;;;;;;;;;;;AAMxB;KArBM;uCAuBS","debugId":null}}]
}