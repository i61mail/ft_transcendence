name: Discord Notification

on:
  push:
  pull_request:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Discord on push
        if: github.event_name == 'push'
        run: |
          curl -H "Content-Type: application/json" \
            -X POST \
            -d "{
              \"content\": \"ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ **New Push **ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€\n\nğŸ‘¤ Pushed by: **${{ github.actor }}**\nğŸŒ¿ Branch: **${{ github.ref_name }}**\nğŸ“ Commit: ${{ github.event.head_commit.message }}\"
            }" \
            ${{ secrets.DISCORD_WEBHOOK }}

      - name: Notify Discord on pull request opened
        if: github.event_name == 'pull_request' && github.event.action == 'opened'
        run: |
          curl -H "Content-Type: application/json" \
            -X POST \
            -d "{
              \"content\": \"ğŸ“Œ **Pull Request Opened**\n\nğŸ‘¤ Author: **${{ github.actor }}**\nğŸ”€ PR Title: *${{ github.event.pull_request.title }}*\nğŸ“‚ Branch: **${{ github.head_ref }} â ${{ github.base_ref }}**\nğŸ”— Link: ${{ github.event.pull_request.html_url }}\"
            }" \
            ${{ secrets.DISCORD_WEBHOOK }}

      - name: Notify Discord on pull request merged
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
        run: |
          curl -H "Content-Type: application/json" \
            -X POST \
            -d "{
              \"content\": \"ğŸ‰ **Pull Request Merged!**\n\nğŸ‘¤ Merged by: **${{ github.actor }}**\nğŸ”€ PR Title: *${{ github.event.pull_request.title }}*\nğŸ“‚ Branch: **${{ github.head_ref }} â ${{ github.base_ref }}**\nğŸ”— Link: ${{ github.event.pull_request.html_url }}\"
            }" \
            ${{ secrets.DISCORD_WEBHOOK }}
